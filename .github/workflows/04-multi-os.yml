# ========================================
# EXEMPLE 4 : MULTI-OS (Multi-Plateformes)
# ========================================
# Ce workflow teste votre code sur PLUSIEURS
# systèmes d'exploitation en même temps

name: 04 - Multi OS

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  # ================
  # Test sur Ubuntu (Linux)
  # ================
  test-ubuntu:
    runs-on: ubuntu-latest

    steps:
      - name: Test sur Ubuntu
        run: |
          echo " Test sur Linux Ubuntu"
          echo "Système : $(uname -s)"
          echo "Version : $(uname -r)"

  # ================
  # Test sur Windows
  # ================
  test-windows:
    runs-on: windows-latest

    steps:
      - name: Test sur Windows
        # Sur Windows, on utilise PowerShell
        run: |
          echo " Test sur Windows"
          echo "Système : $env:OS"

  # ================
  # Test sur MacOS
  # ================
  test-macos:
    runs-on: macos-latest

    steps:
      - name: Test sur MacOS
        run: |
          echo " Test sur MacOS"
          echo "Système : $(uname -s)"

  # ================
  # MÉTHODE AVANCÉE : Matrix Strategy
  # ================
  # Cette méthode permet de tester sur plusieurs OS
  # avec un seul job (plus efficace !)
  test-matrix:
    # Définir une matrice de systèmes d'exploitation
    strategy:
      matrix:
        # Liste des OS à tester
        os: [ubuntu-latest, windows-latest, macos-latest]

    # Utiliser la variable de la matrice
    runs-on: ${{ matrix.os }}

    steps:
      - name: Test sur ${{ matrix.os }}
        run: |
          echo " Test sur ${{ matrix.os }}"
          echo "Ceci s'exécute sur chaque OS !"

# ASTUCE : La matrix strategy est plus efficace et facile à maintenir !
