# ========================================
# EXEMPLE 3 : JOBS SÃ‰QUENTIELS
# ========================================
# Ce workflow montre comment exÃ©cuter des jobs
# les uns APRÃˆS les autres (sÃ©quentiellement)

name: 03 - Jobs SÃ©quentiels

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  # ================
  # Ã‰TAPE 1 : PrÃ©paration
  # ================
  preparation:
    runs-on: ubuntu-latest

    steps:
      - name: PrÃ©parer l'environnement
        run: |
          echo "ðŸ“‹ PrÃ©paration de l'environnement..."
          sleep 2
          echo "âœ… Environnement prÃªt !"

  # ================
  # Ã‰TAPE 2 : Construction
  # ================
  construction:
    runs-on: ubuntu-latest
    # Ce job attend que "preparation" soit terminÃ©
    needs: preparation

    steps:
      - name: Construire le projet
        run: |
          echo "ðŸ”¨ Construction en cours..."
          sleep 3
          echo "âœ… Construction rÃ©ussie !"

  # ================
  # Ã‰TAPE 3 : Tests
  # ================
  tests:
    runs-on: ubuntu-latest
    # Ce job attend que "construction" soit terminÃ©
    needs: construction

    steps:
      - name: ExÃ©cuter les tests
        run: |
          echo "ðŸ§ª Tests en cours..."
          sleep 2
          echo "âœ… Tests rÃ©ussis !"

  # ================
  # Ã‰TAPE 4 : DÃ©ploiement
  # ================
  deploiement:
    runs-on: ubuntu-latest
    # Ce job attend que "tests" soit terminÃ©
    needs: tests

    steps:
      - name: DÃ©ployer l'application
        run: |
          echo "ðŸš€ DÃ©ploiement en cours..."
          sleep 2
          echo "âœ… DÃ©ploiement rÃ©ussi !"

# ORDRE D'EXÃ‰CUTION :
# 1. preparation
# 2. construction (attend preparation)
# 3. tests (attend construction)
# 4. deploiement (attend tests)
